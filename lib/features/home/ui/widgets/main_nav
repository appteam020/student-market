import 'package:flutter/material.dart';
import 'package:your_app/features/home/ui/home_screen.dart';
import 'package:your_app/features/profile/ui/profile_screen.dart';
import 'package:your_app/features/cart/ui/cart_screen.dart';
import 'home_bottom_nav.dart'; 

class MainNavigation extends StatefulWidget {
  const MainNavigation({super.key});

  @override
  State<MainNavigation> createState() => _MainNavigationState();
}

class _MainNavigationState extends State<MainNavigation> {
  int _currentIndex = 0;
   if (location.startsWith('/home')) currentIndex = 0;
   if (location.startsWith('/dashboard')) currentIndex = 1;
   if (location.startsWith('/add_product')) currentIndex = 2;
   if (location.startsWith('/chats')) currentIndex = 3;
   if (location.startsWith('/profile_screen')) currentIndex = 4;


  final List<Widget> _screens = [
   HomeScreen(),
    DashboardScreen(),
    UploadProductScreen(),
    Chats(),
    ProfileScreen(),
  ];

  final List<BottomNavItemData> _items = items: [
          BottomNavItemData(asset: 'assets/images/home.svg', label: tr('nav_home')),
          BottomNavItemData(asset: 'assets/images/dashboard.svg', label: tr('nav_dashboard')),
          BottomNavItemData(asset: 'assets/images/plus-circle.svg', label: tr('nav_add_product')),
          BottomNavItemData(asset: 'assets/images/chats.svg', label: tr('nav_chats')),
          BottomNavItemData(asset: 'assets/images/profile.svg', label: tr('nav_profile')),
        ],

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: _screens[_currentIndex],
      bottomNavigationBar: HomeBottomNav(
        currentIndex: _currentIndex,
         onTap: (index) {
          if (index == 0) context.go('/home');
          if (index == 1) context.go('/dashboard');
          if (index == 2) context.go('/add_product');
          if (index == 3) context.go('/chats');
          if (index == 3) context.go('/profile_screen');
        },
        items: _items,
      ),
    );
  }
}
